(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{272:function(t,s,a){"use strict";a.r(s);var e=a(17),r=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"get-history"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#get-history"}},[t._v("#")]),t._v(" Get History")]),t._v(" "),a("p",[t._v("Fetches history from Home Assistant (all history for the past day by default)")]),t._v(" "),a("h2",{attrs:{id:"configuration"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#configuration"}},[t._v("#")]),t._v(" Configuration")]),t._v(" "),a("h3",{attrs:{id:"entity-id"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#entity-id"}},[t._v("#")]),t._v(" Entity ID")]),t._v(" "),a("ul",[a("li",[t._v("Type: "),a("code",[t._v("string")])])]),t._v(" "),a("p",[t._v("Exact entity_id to fetch history for must be an exact match as is passed directly to the Home Assistant.")]),t._v(" "),a("h3",{attrs:{id:"entity-id-type"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#entity-id-type"}},[t._v("#")]),t._v(" Entity ID Type")]),t._v(" "),a("ul",[a("li",[t._v("Type: "),a("code",[t._v("string")])]),t._v(" "),a("li",[t._v("Values: "),a("code",[t._v("is")]),t._v(" | "),a("code",[t._v("includes")])]),t._v(" "),a("li",[t._v("Default: "),a("code",[t._v("is")])])]),t._v(" "),a("p",[a("code",[t._v("is")]),t._v(" or "),a("code",[t._v("includes")]),t._v(" depending on the match type.")]),t._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),a("p",[a("code",[t._v("includes")]),t._v(" fetches all history for the time period then filters according to the value,\nthis will be less performant than exact "),a("code",[t._v("is")]),t._v(" matching")])]),t._v(" "),a("h3",{attrs:{id:"start-date"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#start-date"}},[t._v("#")]),t._v(" Start Date")]),t._v(" "),a("ul",[a("li",[t._v("Type: "),a("code",[t._v("string")])]),t._v(" "),a("li",[t._v("Values: ISO Format Date")]),t._v(" "),a("li",[t._v("Default: 24 hours prior")])]),t._v(" "),a("p",[t._v("Date to start fetching history from. Will override the configuration if passed in")]),t._v(" "),a("p",[a("strong",[t._v("Also See:")])]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://en.wikipedia.org/wiki/ISO_8601",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://en.wikipedia.org/wiki/ISO_8601"),a("OutboundLink")],1)])]),t._v(" "),a("h3",{attrs:{id:"end-date"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#end-date"}},[t._v("#")]),t._v(" End Date")]),t._v(" "),a("ul",[a("li",[t._v("Type: "),a("code",[t._v("string")])]),t._v(" "),a("li",[t._v("Values: ISO Format Date")]),t._v(" "),a("li",[t._v("Default: 24 hours from start date")])]),t._v(" "),a("p",[t._v("The end date to fetch history too. Will override the configuration if passed in")]),t._v(" "),a("p",[a("strong",[t._v("Also See:")])]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://en.wikipedia.org/wiki/ISO_8601",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://en.wikipedia.org/wiki/ISO_8601"),a("OutboundLink")],1)])]),t._v(" "),a("h3",{attrs:{id:"use-relative-time"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#use-relative-time"}},[t._v("#")]),t._v(" Use Relative Time")]),t._v(" "),a("ul",[a("li",[t._v("Type: "),a("code",[t._v("boolean")])]),t._v(" "),a("li",[t._v("Default: "),a("code",[t._v("false")])])]),t._v(" "),a("p",[t._v("A checkbox to use relative time or not.")]),t._v(" "),a("h3",{attrs:{id:"in-the-last"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#in-the-last"}},[t._v("#")]),t._v(" In the Last")]),t._v(" "),a("ul",[a("li",[t._v("Type: "),a("code",[t._v("string")])])]),t._v(" "),a("p",[t._v("A time string that will be parsed the following keywords into time values.")]),t._v(" "),a("p",[t._v("Example: "),a("code",[t._v("4h 30m")]),t._v(" = The last 4 hours and 30 minutes")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("ms, milli, millisecond, milliseconds - will parse to milliseconds\ns, sec, secs, second, seconds - will parse to seconds\nm, min, mins, minute, minutes - will parse to minutes\nh, hr, hrs, hour, hours - will parse to hours\nd, day, days - will parse to days\nw, week, weeks - will parse to weeks\nmon, mth, mths, month, months - will parse to months\ny, yr, yrs, year, years - will parse to years\n")])])]),a("h3",{attrs:{id:"flatten-results"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#flatten-results"}},[t._v("#")]),t._v(" Flatten Results")]),t._v(" "),a("p",[t._v("Instead of returning the data from home assistant ( array for each entity_id ) return one flattened array of one item per history entry")]),t._v(" "),a("h3",{attrs:{id:"output-types"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#output-types"}},[t._v("#")]),t._v(" Output Types")]),t._v(" "),a("ul",[a("li",[t._v("Type: "),a("code",[t._v("string")])]),t._v(" "),a("li",[t._v("Values: "),a("code",[t._v("array")]),t._v(" | "),a("code",[t._v("split")])]),t._v(" "),a("li",[t._v("Default: "),a("code",[t._v("array")])])]),t._v(" "),a("h2",{attrs:{id:"inputs"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#inputs"}},[t._v("#")]),t._v(" Inputs")]),t._v(" "),a("p",[t._v("All properties of "),a("code",[t._v("msg.payload")])]),t._v(" "),a("h3",{attrs:{id:"entity-id-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#entity-id-2"}},[t._v("#")]),t._v(" entity_id")]),t._v(" "),a("ul",[a("li",[t._v("Type: "),a("code",[t._v("string")])]),t._v(" "),a("li",[t._v("Alias: "),a("code",[t._v("msg.entityid")]),t._v(" "),a("Badge",{attrs:{type:"warning",text:"deprecated"}})],1)]),t._v(" "),a("h3",{attrs:{id:"startdate"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#startdate"}},[t._v("#")]),t._v(" startdate")]),t._v(" "),a("ul",[a("li",[t._v("Type: "),a("code",[t._v("string")])]),t._v(" "),a("li",[t._v("Values: ISO Format Date")]),t._v(" "),a("li",[t._v("Alias: "),a("code",[t._v("msg.startdate")]),t._v(" "),a("Badge",{attrs:{type:"warning",text:"deprecated"}})],1)]),t._v(" "),a("h3",{attrs:{id:"enddate"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#enddate"}},[t._v("#")]),t._v(" enddate")]),t._v(" "),a("ul",[a("li",[t._v("Type: "),a("code",[t._v("string")])]),t._v(" "),a("li",[t._v("Values: ISO Format Date")]),t._v(" "),a("li",[t._v("Alias: "),a("code",[t._v("msg.enddate")]),t._v(" "),a("Badge",{attrs:{type:"warning",text:"deprecated"}})],1)]),t._v(" "),a("h3",{attrs:{id:"relativetime"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#relativetime"}},[t._v("#")]),t._v(" relativetime")]),t._v(" "),a("ul",[a("li",[t._v("Type: "),a("code",[t._v("string")])]),t._v(" "),a("li",[t._v("Alias: "),a("code",[t._v("msg.relativetime")]),t._v(" "),a("Badge",{attrs:{type:"warning",text:"deprecated"}})],1)]),t._v(" "),a("p",[t._v("If "),a("code",[t._v("relativetime")]),t._v(" exists "),a("code",[t._v("startdate")]),t._v(" and "),a("code",[t._v("enddate")]),t._v(" will be ignored.")]),t._v(" "),a("h3",{attrs:{id:"flatten"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#flatten"}},[t._v("#")]),t._v(" flatten")]),t._v(" "),a("ul",[a("li",[t._v("Type: "),a("code",[t._v("boolean")])]),t._v(" "),a("li",[t._v("Alias: "),a("code",[t._v("msg.flatten")]),t._v(" "),a("Badge",{attrs:{type:"warning",text:"deprecated"}})],1)]),t._v(" "),a("h2",{attrs:{id:"outputs"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#outputs"}},[t._v("#")]),t._v(" Outputs")]),t._v(" "),a("h3",{attrs:{id:"payload"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#payload"}},[t._v("#")]),t._v(" payload")]),t._v(" "),a("ul",[a("li",[t._v("Type: "),a("code",[t._v("array")])])]),t._v(" "),a("p",[t._v("The history returned by home-assistant, which is an array of arrays where each array entry contains history objects for one particular entity")]),t._v(" "),a("h3",{attrs:{id:"startdate-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#startdate-2"}},[t._v("#")]),t._v(" startdate")]),t._v(" "),a("ul",[a("li",[t._v("Type: "),a("code",[t._v("string")])])]),t._v(" "),a("p",[t._v("ISO date string used to fetch history")]),t._v(" "),a("h3",{attrs:{id:"enddate-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#enddate-2"}},[t._v("#")]),t._v(" enddate")]),t._v(" "),a("ul",[a("li",[t._v("Type: "),a("code",[t._v("string")])])]),t._v(" "),a("p",[t._v("ISO date string used to fetch history")]),t._v(" "),a("h3",{attrs:{id:"entity-id-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#entity-id-3"}},[t._v("#")]),t._v(" entity_id")]),t._v(" "),a("ul",[a("li",[t._v("Type: "),a("code",[t._v("string")])])]),t._v(" "),a("p",[t._v("The entity id string used during fetch history call")]),t._v(" "),a("p",[t._v("Example output of "),a("code",[t._v("msg")]),t._v(":")]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"startdate"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2020-01-11T16:41:31.086Z"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"enddate"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2020-01-14T16:41:31.086Z"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"entityid"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"light.kitchen_light"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"payload"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"attributes"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"friendly_name"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Kitchen Light"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"icon"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"mdi:light-switch"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"context"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"id"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"850e510e36fb494c9abc79e01e897d54"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"parent_id"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token null keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"user_id"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token null keyword"}},[t._v("null")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"entity_id"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"light.kitchen_light"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"last_changed"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2019-12-28T06:47:28.618000+00:00"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"last_updated"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2019-12-28T06:47:28.618000+00:00"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"state"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"off"')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"attributes"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"brightness"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("28")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"friendly_name"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Kitchen Light"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"icon"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"mdi:light-switch"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"context"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"id"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"4d4abe29f2bc43dab39101193f1fefe4"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"parent_id"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token null keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"user_id"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token null keyword"}},[t._v("null")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"entity_id"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"light.kitchen_light"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"last_changed"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2019-12-28T07:48:11.514137+00:00"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"last_updated"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2019-12-28T07:48:11.514137+00:00"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"state"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"on"')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    ...\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h2",{attrs:{id:"references"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#references"}},[t._v("#")]),t._v(" References")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://www.home-assistant.io/integrations/history",target:"_blank",rel:"noopener noreferrer"}},[t._v("Home Assistant History Component"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://developers.home-assistant.io/docs/en/external_api_rest.html#get-apihistoryperiodlttimestamp",target:"_blank",rel:"noopener noreferrer"}},[t._v("Home Assistant API: /api/history/period"),a("OutboundLink")],1)])])])}),[],!1,null,null,null);s.default=r.exports}}]);