<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>JSONata Examples | node-red-contrib-home-assistant-websocket</title>
    <meta name="description" content="Node-RED integration with Home Assistant through the WebSocket and HTTP API">
    <meta name="generator" content="VuePress 1.3.1">
    <link rel="icon" href="/node-red-contrib-home-assistant-websocket/favicon.ico">
    
    <link rel="preload" href="/node-red-contrib-home-assistant-websocket/assets/css/0.styles.adb5772a.css" as="style"><link rel="preload" href="/node-red-contrib-home-assistant-websocket/assets/js/app.a92b787d.js" as="script"><link rel="preload" href="/node-red-contrib-home-assistant-websocket/assets/js/2.b9376dcd.js" as="script"><link rel="preload" href="/node-red-contrib-home-assistant-websocket/assets/js/7.fc5220a0.js" as="script"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/10.ce96fa65.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/11.60e9de39.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/12.725463d7.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/13.10764a32.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/14.68f40abb.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/15.61c9a91c.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/16.3de95dbe.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/17.b5a20714.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/18.5ed6e3c6.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/19.caa6962c.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/20.1cdf3efe.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/21.ab5af733.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/22.e3da0f6f.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/23.a9185e9f.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/24.dffd6abf.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/25.9fc4de27.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/26.f4377c95.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/27.1bd7d922.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/28.f5817633.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/29.7cba7294.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/3.53632578.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/30.c976f57c.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/31.ea94efbf.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/32.051889da.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/33.4ca28be0.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/34.fe4172ac.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/35.81e3b42a.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/36.56199dba.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/37.d8ee6d33.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/38.fc025632.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/39.eec6806d.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/4.7970f821.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/40.73d870ee.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/5.f67e592b.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/6.403f9c2c.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/8.ec6433c6.js"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/js/9.0c59e6f4.js">
    <link rel="stylesheet" href="/node-red-contrib-home-assistant-websocket/assets/css/0.styles.adb5772a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/node-red-contrib-home-assistant-websocket/" class="home-link router-link-active"><!----> <span class="site-name">node-red-contrib-home-assistant-websocket</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/node-red-contrib-home-assistant-websocket/guide/" class="nav-link">
  Guides
</a></div><div class="nav-item"><a href="/node-red-contrib-home-assistant-websocket/node/" class="nav-link">
  Nodes
</a></div><div class="nav-item"><a href="/node-red-contrib-home-assistant-websocket/FAQ.html" class="nav-link">
  FAQ
</a></div><div class="nav-item"><a href="/node-red-contrib-home-assistant-websocket/cookbook/" class="nav-link router-link-active">
  Cookbook
</a></div> <a href="https://github.com/zachowj/node-red-contrib-home-assistant-websocket" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/node-red-contrib-home-assistant-websocket/guide/" class="nav-link">
  Guides
</a></div><div class="nav-item"><a href="/node-red-contrib-home-assistant-websocket/node/" class="nav-link">
  Nodes
</a></div><div class="nav-item"><a href="/node-red-contrib-home-assistant-websocket/FAQ.html" class="nav-link">
  FAQ
</a></div><div class="nav-item"><a href="/node-red-contrib-home-assistant-websocket/cookbook/" class="nav-link router-link-active">
  Cookbook
</a></div> <a href="https://github.com/zachowj/node-red-contrib-home-assistant-websocket" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Cookbook</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/node-red-contrib-home-assistant-websocket/cookbook/get-entities.html" class="sidebar-link">Get Entities Examples</a></li><li><a href="/node-red-contrib-home-assistant-websocket/cookbook/jsonata.html" class="active sidebar-link">JSONata Examples</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/node-red-contrib-home-assistant-websocket/cookbook/jsonata.html#increase-lights-brightness-with-remote" class="sidebar-link">Increase lights brightness with remote</a></li><li class="sidebar-sub-header"><a href="/node-red-contrib-home-assistant-websocket/cookbook/jsonata.html#notification-of-lights-left-on-when-leaving-home" class="sidebar-link">Notification of lights left on when leaving home</a></li><li class="sidebar-sub-header"><a href="/node-red-contrib-home-assistant-websocket/cookbook/jsonata.html#or-conditional-for-the-events-state-node" class="sidebar-link">OR conditional for the events: state node</a></li></ul></li><li><a href="/node-red-contrib-home-assistant-websocket/cookbook/motion-triggered-light.html" class="sidebar-link">Motion Triggered Light</a></li><li><a href="/node-red-contrib-home-assistant-websocket/cookbook/saving-and-restoring-states.html" class="sidebar-link">Saving and Restoring States</a></li><li><a href="/node-red-contrib-home-assistant-websocket/cookbook/get-state_changed-events-based-on-area.html" class="sidebar-link">Get state_changed Events Based on Area</a></li><li><a href="/node-red-contrib-home-assistant-websocket/cookbook/sun-events.html" class="sidebar-link">Turn Light On/Off with Sunset/Sunrise</a></li><li><a href="/node-red-contrib-home-assistant-websocket/cookbook/vacation-mode.html" class="sidebar-link">Vacation Mode</a></li><li><a href="/node-red-contrib-home-assistant-websocket/cookbook/expiration-date-monitor.html" class="sidebar-link">Expiration Date Monitor with notification</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="jsonata-examples"><a href="#jsonata-examples" class="header-anchor">#</a> JSONata Examples</h1> <h2 id="increase-lights-brightness-with-remote"><a href="#increase-lights-brightness-with-remote" class="header-anchor">#</a> Increase lights brightness with remote</h2> <p>A remote with a button that when clicked it increases the brightness of a given light by an amount that is set from an input_number inside Home Assistant.</p> <p><img src="data:image/png;base64,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" alt="screenshot"></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token property">&quot;id&quot;</span><span class="token operator">:</span><span class="token string">&quot;86cbf80d.5a9cf8&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;api-call-service&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;z&quot;</span><span class="token operator">:</span><span class="token string">&quot;83fb2374.5839d&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;version&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token property">&quot;service_domain&quot;</span><span class="token operator">:</span><span class="token string">&quot;light&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;service&quot;</span><span class="token operator">:</span><span class="token string">&quot;turn_on&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;entityId&quot;</span><span class="token operator">:</span><span class="token string">&quot;light.kitchen&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;data&quot;</span><span class="token operator">:</span><span class="token string">&quot;{\&quot;brightness\&quot;: $min([$entities(\&quot;light.kitchen\&quot;).attributes.brightness + $entities(\&quot;input_number.brightness\&quot;).state, 255])}&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;dataType&quot;</span><span class="token operator">:</span><span class="token string">&quot;jsonata&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;mergecontext&quot;</span><span class="token operator">:</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;output_location&quot;</span><span class="token operator">:</span><span class="token string">&quot;payload&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;output_location_type&quot;</span><span class="token operator">:</span><span class="token string">&quot;msg&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;mustacheAltTags&quot;</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token property">&quot;x&quot;</span><span class="token operator">:</span><span class="token number">426</span><span class="token punctuation">,</span><span class="token property">&quot;y&quot;</span><span class="token operator">:</span><span class="token number">416</span><span class="token punctuation">,</span><span class="token property">&quot;wires&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token property">&quot;id&quot;</span><span class="token operator">:</span><span class="token string">&quot;8aad6643.9ee7a8&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;server-state-changed&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;z&quot;</span><span class="token operator">:</span><span class="token string">&quot;83fb2374.5839d&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;Remote Button&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;version&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token property">&quot;entityidfilter&quot;</span><span class="token operator">:</span><span class="token string">&quot;sensor.button&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;entityidfiltertype&quot;</span><span class="token operator">:</span><span class="token string">&quot;exact&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;outputinitially&quot;</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token property">&quot;state_type&quot;</span><span class="token operator">:</span><span class="token string">&quot;str&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;haltifstate&quot;</span><span class="token operator">:</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;halt_if_type&quot;</span><span class="token operator">:</span><span class="token string">&quot;str&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;halt_if_compare&quot;</span><span class="token operator">:</span><span class="token string">&quot;is&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;outputs&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token property">&quot;output_only_on_state_change&quot;</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token property">&quot;x&quot;</span><span class="token operator">:</span><span class="token number">224</span><span class="token punctuation">,</span><span class="token property">&quot;y&quot;</span><span class="token operator">:</span><span class="token number">416</span><span class="token punctuation">,</span><span class="token property">&quot;wires&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">&quot;86cbf80d.5a9cf8&quot;</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">]</span>
</code></pre></div><p>JSONata expression in the call-service node</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;brightness&quot;</span><span class="token operator">:</span> $min(<span class="token punctuation">[</span>
    $entities(<span class="token string">&quot;light.kitchen&quot;</span>).attributes.brightness +
      $entities(<span class="token string">&quot;input_number.brightness&quot;</span>).state<span class="token punctuation">,</span>
    <span class="token number">255</span>
  <span class="token punctuation">]</span>)
<span class="token punctuation">}</span>
</code></pre></div><h2 id="notification-of-lights-left-on-when-leaving-home"><a href="#notification-of-lights-left-on-when-leaving-home" class="header-anchor">#</a> Notification of lights left on when leaving home</h2> <p>Get notified when light or switch is left on when you leave. This a remake of Example #1 from this <a href="https://community.home-assistant.io/t/examples-for-using-the-new-get-entities-node/85777" target="_blank" rel="noopener noreferrer">post<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> showing how to manipulate entities and get the desired output.</p> <p><img src="data:image/png;base64,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" alt="screenshot"></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token property">&quot;id&quot;</span><span class="token operator">:</span><span class="token string">&quot;8420cd3d.051ac&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;trigger-state&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;z&quot;</span><span class="token operator">:</span><span class="token string">&quot;83fb2374.5839d&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;Left Home&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;entityid&quot;</span><span class="token operator">:</span><span class="token string">&quot;device_tracker.jason&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;entityidfiltertype&quot;</span><span class="token operator">:</span><span class="token string">&quot;exact&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;debugenabled&quot;</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token property">&quot;constraints&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token property">&quot;id&quot;</span><span class="token operator">:</span><span class="token string">&quot;9i2c9sz7d3e&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;targetType&quot;</span><span class="token operator">:</span><span class="token string">&quot;this_entity&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;targetValue&quot;</span><span class="token operator">:</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;propertyType&quot;</span><span class="token operator">:</span><span class="token string">&quot;previous_state&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;propertyValue&quot;</span><span class="token operator">:</span><span class="token string">&quot;old_state.state&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;comparatorType&quot;</span><span class="token operator">:</span><span class="token string">&quot;is&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;comparatorValueDatatype&quot;</span><span class="token operator">:</span><span class="token string">&quot;str&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;comparatorValue&quot;</span><span class="token operator">:</span><span class="token string">&quot;home&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token property">&quot;id&quot;</span><span class="token operator">:</span><span class="token string">&quot;3h3lghs8xsm&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;targetType&quot;</span><span class="token operator">:</span><span class="token string">&quot;this_entity&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;targetValue&quot;</span><span class="token operator">:</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;propertyType&quot;</span><span class="token operator">:</span><span class="token string">&quot;current_state&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;propertyValue&quot;</span><span class="token operator">:</span><span class="token string">&quot;new_state.state&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;comparatorType&quot;</span><span class="token operator">:</span><span class="token string">&quot;is&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;comparatorValueDatatype&quot;</span><span class="token operator">:</span><span class="token string">&quot;str&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;comparatorValue&quot;</span><span class="token operator">:</span><span class="token string">&quot;not_home&quot;</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">&quot;constraintsmustmatch&quot;</span><span class="token operator">:</span><span class="token string">&quot;all&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;outputs&quot;</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token property">&quot;customoutputs&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token property">&quot;outputinitially&quot;</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token property">&quot;state_type&quot;</span><span class="token operator">:</span><span class="token string">&quot;str&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;x&quot;</span><span class="token operator">:</span><span class="token number">214</span><span class="token punctuation">,</span><span class="token property">&quot;y&quot;</span><span class="token operator">:</span><span class="token number">240</span><span class="token punctuation">,</span><span class="token property">&quot;wires&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">&quot;888034a3.b642c8&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token property">&quot;id&quot;</span><span class="token operator">:</span><span class="token string">&quot;888034a3.b642c8&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;api-call-service&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;z&quot;</span><span class="token operator">:</span><span class="token string">&quot;83fb2374.5839d&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;Notify&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;version&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token property">&quot;service_domain&quot;</span><span class="token operator">:</span><span class="token string">&quot;notify&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;service&quot;</span><span class="token operator">:</span><span class="token string">&quot;android_jason&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;entityId&quot;</span><span class="token operator">:</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;data&quot;</span><span class="token operator">:</span><span class="token string">&quot;{\t   \&quot;message\&quot;: \&quot;The \&quot; &amp; $join($entities().*[state = \&quot;on\&quot; and entity_id ~&gt; /^light|^switch/].attributes.friendly_name, \&quot;, \&quot;) &amp; \&quot; are on.\&quot;,\t   \&quot;title\&quot;: \&quot;Left On\&quot;\t}&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;dataType&quot;</span><span class="token operator">:</span><span class="token string">&quot;jsonata&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;mergecontext&quot;</span><span class="token operator">:</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;output_location&quot;</span><span class="token operator">:</span><span class="token string">&quot;payload&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;output_location_type&quot;</span><span class="token operator">:</span><span class="token string">&quot;msg&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;mustacheAltTags&quot;</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token property">&quot;x&quot;</span><span class="token operator">:</span><span class="token number">370</span><span class="token punctuation">,</span><span class="token property">&quot;y&quot;</span><span class="token operator">:</span><span class="token number">240</span><span class="token punctuation">,</span><span class="token property">&quot;wires&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">]</span>
</code></pre></div><p>This is the same as above but uses an event:state node and shows how to use the <code>$entity()</code> and <code>$prevEntity()</code> functions to compare states.</p> <p><img src="data:image/png;base64,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" alt="screenshot"></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token property">&quot;id&quot;</span><span class="token operator">:</span><span class="token string">&quot;cb25c8d7.881688&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;server-state-changed&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;z&quot;</span><span class="token operator">:</span><span class="token string">&quot;83fb2374.5839d&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;Left Home&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;version&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token property">&quot;entityidfilter&quot;</span><span class="token operator">:</span><span class="token string">&quot;person.jason&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;entityidfiltertype&quot;</span><span class="token operator">:</span><span class="token string">&quot;exact&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;outputinitially&quot;</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token property">&quot;state_type&quot;</span><span class="token operator">:</span><span class="token string">&quot;str&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;haltifstate&quot;</span><span class="token operator">:</span><span class="token string">&quot;$entity().state != $prevEntity().state&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;halt_if_type&quot;</span><span class="token operator">:</span><span class="token string">&quot;jsonata&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;halt_if_compare&quot;</span><span class="token operator">:</span><span class="token string">&quot;jsonata&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;outputs&quot;</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token property">&quot;output_only_on_state_change&quot;</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token property">&quot;x&quot;</span><span class="token operator">:</span><span class="token number">204</span><span class="token punctuation">,</span><span class="token property">&quot;y&quot;</span><span class="token operator">:</span><span class="token number">352</span><span class="token punctuation">,</span><span class="token property">&quot;wires&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">&quot;b48e8249.ad09f&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token property">&quot;id&quot;</span><span class="token operator">:</span><span class="token string">&quot;b48e8249.ad09f&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;api-call-service&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;z&quot;</span><span class="token operator">:</span><span class="token string">&quot;83fb2374.5839d&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;Notify&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;version&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token property">&quot;service_domain&quot;</span><span class="token operator">:</span><span class="token string">&quot;notify&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;service&quot;</span><span class="token operator">:</span><span class="token string">&quot;android_jason&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;entityId&quot;</span><span class="token operator">:</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;data&quot;</span><span class="token operator">:</span><span class="token string">&quot;{\t   \&quot;message\&quot;: \&quot;The \&quot; &amp; $join($entities().*[state = \&quot;on\&quot; and entity_id ~&gt; /^light|^switch/].attributes.friendly_name, \&quot;, \&quot;) &amp; \&quot; are on.\&quot;,\t   \&quot;title\&quot;: \&quot;Left On\&quot;\t}&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;dataType&quot;</span><span class="token operator">:</span><span class="token string">&quot;jsonata&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;mergecontext&quot;</span><span class="token operator">:</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;output_location&quot;</span><span class="token operator">:</span><span class="token string">&quot;payload&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;output_location_type&quot;</span><span class="token operator">:</span><span class="token string">&quot;msg&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;mustacheAltTags&quot;</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token property">&quot;x&quot;</span><span class="token operator">:</span><span class="token number">354</span><span class="token punctuation">,</span><span class="token property">&quot;y&quot;</span><span class="token operator">:</span><span class="token number">352</span><span class="token punctuation">,</span><span class="token property">&quot;wires&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">]</span>
</code></pre></div><p>Event-State Node:
<code>$entity().state != $prevEntity().state</code></p> <p>Call-Service Node:</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
     <span class="token property">&quot;message&quot;</span><span class="token operator">:</span> <span class="token string">&quot;The &quot;</span> &amp; $join($entities().*<span class="token punctuation">[</span>state = <span class="token string">&quot;on&quot;</span> and entity_id ~&gt; /^light|^switch/<span class="token punctuation">]</span>.attributes.friendly_name<span class="token punctuation">,</span> <span class="token string">&quot;, &quot;</span>) &amp; <span class="token string">&quot; are on.&quot;</span><span class="token punctuation">,</span>
     <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Left On&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="or-conditional-for-the-events-state-node"><a href="#or-conditional-for-the-events-state-node" class="header-anchor">#</a> OR conditional for the events: state node</h2> <p>The trigger-state node is great if you have several conditions you want to check for but it doesn't allow you to use OR checks. Using a JSONata expression with an event:state node will allow you to fill this gap.</p> <p>Motion sensor at the front door triggers and have a text to speech notification be sent if at least one person is home.</p> <p><img src="data:image/png;base64,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" alt="screenshot"></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token property">&quot;id&quot;</span><span class="token operator">:</span><span class="token string">&quot;114a7e82.282431&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;server-state-changed&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;z&quot;</span><span class="token operator">:</span><span class="token string">&quot;fac037bf.a42d78&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;Motion Front Door&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;version&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token property">&quot;entityidfilter&quot;</span><span class="token operator">:</span><span class="token string">&quot;binary_sensor.front_door&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;entityidfiltertype&quot;</span><span class="token operator">:</span><span class="token string">&quot;exact&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;outputinitially&quot;</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token property">&quot;state_type&quot;</span><span class="token operator">:</span><span class="token string">&quot;str&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;haltifstate&quot;</span><span class="token operator">:</span><span class="token string">&quot;$entity().state = \&quot;on\&quot; and (\t   $entities(\&quot;person.person1\&quot;).state = \&quot;home\&quot; or $entities(\&quot;person.person2\&quot;).state = \&quot;home\&quot;\t)&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;halt_if_type&quot;</span><span class="token operator">:</span><span class="token string">&quot;jsonata&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;halt_if_compare&quot;</span><span class="token operator">:</span><span class="token string">&quot;jsonata&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;outputs&quot;</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token property">&quot;output_only_on_state_change&quot;</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token property">&quot;x&quot;</span><span class="token operator">:</span><span class="token number">218</span><span class="token punctuation">,</span><span class="token property">&quot;y&quot;</span><span class="token operator">:</span><span class="token number">1040</span><span class="token punctuation">,</span><span class="token property">&quot;wires&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">&quot;8c84fdde.9770f&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token property">&quot;id&quot;</span><span class="token operator">:</span><span class="token string">&quot;8c84fdde.9770f&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;type&quot;</span><span class="token operator">:</span><span class="token string">&quot;api-call-service&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;z&quot;</span><span class="token operator">:</span><span class="token string">&quot;fac037bf.a42d78&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;TTS Motion&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;version&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token property">&quot;service_domain&quot;</span><span class="token operator">:</span><span class="token string">&quot;tts&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;service&quot;</span><span class="token operator">:</span><span class="token string">&quot;google_say&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;entityId&quot;</span><span class="token operator">:</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;data&quot;</span><span class="token operator">:</span><span class="token string">&quot;{\&quot;message\&quot;: \&quot;Movement at the front door.\&quot;}&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;dataType&quot;</span><span class="token operator">:</span><span class="token string">&quot;json&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;mergecontext&quot;</span><span class="token operator">:</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;output_location&quot;</span><span class="token operator">:</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;output_location_type&quot;</span><span class="token operator">:</span><span class="token string">&quot;none&quot;</span><span class="token punctuation">,</span><span class="token property">&quot;mustacheAltTags&quot;</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token property">&quot;x&quot;</span><span class="token operator">:</span><span class="token number">406</span><span class="token punctuation">,</span><span class="token property">&quot;y&quot;</span><span class="token operator">:</span><span class="token number">1040</span><span class="token punctuation">,</span><span class="token property">&quot;wires&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">]</span>
</code></pre></div><div class="language-json extra-class"><pre class="language-json"><code>$entity().state = <span class="token string">&quot;on&quot;</span> and (
   $entities(<span class="token string">&quot;person.person1&quot;</span>).state = <span class="token string">&quot;home&quot;</span> or $entities(<span class="token string">&quot;person.person2&quot;</span>).state = <span class="token string">&quot;home&quot;</span>
)
</code></pre></div><p><strong>Also see:</strong></p> <ul><li><a href="/node-red-contrib-home-assistant-websocket/guide/jsonata.html">JSONata guide</a></li></ul></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/zachowj/node-red-contrib-home-assistant-websocket/edit/dev/docs/cookbook/jsonata.md" target="_blank" rel="noopener noreferrer">Help us improve this page!</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">3/24/2020, 1:31:36 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      
      <a href="/node-red-contrib-home-assistant-websocket/cookbook/get-entities.html" class="prev">
        Get Entities Examples
      </a></span> <span class="next"><a href="/node-red-contrib-home-assistant-websocket/cookbook/motion-triggered-light.html">
        Motion Triggered Light
      </a>
      
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/node-red-contrib-home-assistant-websocket/assets/js/app.a92b787d.js" defer></script><script src="/node-red-contrib-home-assistant-websocket/assets/js/2.b9376dcd.js" defer></script><script src="/node-red-contrib-home-assistant-websocket/assets/js/7.fc5220a0.js" defer></script>
  </body>
</html>
